#--------------------------------------------------------------------------------
# Instalar paquetes y cargar librer√≠as
#--------------------------------------------------------------------------------

library(raster)
library(RStoolbox)
library(rgdal)
library(e1071)
library(randomForest)
library(tidyverse)
library(rasterVis)

#--------------------------------------------------------------------------------
# Cargar el raster
#--------------------------------------------------------------------------------

#Cambiar el directorio
allband <- raster("C:/Users/.../Wue_stack.tif")

#--------------------------------------------------------------------------------
# Cargar los datos de entrenamiento
#--------------------------------------------------------------------------------

#Cambiar el directorio
td <- readOGR("C:/Users/.../training.shp")

#--------------------------------------------------------------------------------
# Cargar los datos de validacion
#--------------------------------------------------------------------------------

#Cambiar el directorio
vali <- readOGR("C:/Users/.../validation.shp")

#--------------------------------------------------------------------------------
# Visualizar las capas
#--------------------------------------------------------------------------------

plot(allband[[1]])
plot(td,add=TRUE)
plot(val, add=TRUE)
head(td)

#--------------------------------------------------------------------------------
# Correr modelo
#--------------------------------------------------------------------------------

sc1<-superClass(allband, trainData = td, valData=vali, responseCol = "class") 

#--------------------------------------------------------------------------------
# Visualizar resultados
#--------------------------------------------------------------------------------

plot(sc1$map)

sc1$validation$performance
